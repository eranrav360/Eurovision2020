<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eurovision 2020 Voting Simulator</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const EurovisionVoting = () => {
          const [countries, setCountries] = useState([
            { name: 'SWEDEN', code: 'SE', flag: 'ğŸ‡¸ğŸ‡ª', points: 0 },
            { name: 'ROMANIA', code: 'RO', flag: 'ğŸ‡·ğŸ‡´', points: 0 },
            { name: 'BULGARIA', code: 'BG', flag: 'ğŸ‡§ğŸ‡¬', points: 0 },
            { name: 'LITHUANIA', code: 'LT', flag: 'ğŸ‡±ğŸ‡¹', points: 0 },
            { name: 'GREECE', code: 'GR', flag: 'ğŸ‡¬ğŸ‡·', points: 0 },
            { name: 'ITALY', code: 'IT', flag: 'ğŸ‡®ğŸ‡¹', points: 0 },
            { name: 'MALTA', code: 'MT', flag: 'ğŸ‡²ğŸ‡¹', points: 0 },
            { name: 'SWITZERLAND', code: 'CH', flag: 'ğŸ‡¨ğŸ‡­', points: 0 },
            { name: 'NORWAY', code: 'NO', flag: 'ğŸ‡³ğŸ‡´', points: 0 },
            { name: 'GERMANY', code: 'DE', flag: 'ğŸ‡©ğŸ‡ª', points: 0 },
            { name: 'AUSTRALIA', code: 'AU', flag: 'ğŸ‡¦ğŸ‡º', points: 0 },
            { name: 'RUSSIA', code: 'RU', flag: 'ğŸ‡·ğŸ‡º', points: 0 },
            { name: 'UNITED KINGDOM', code: 'GB', flag: 'ğŸ‡¬ğŸ‡§', points: 0 },
            { name: 'POLAND', code: 'PL', flag: 'ğŸ‡µğŸ‡±', points: 0 },
            { name: 'SPAIN', code: 'ES', flag: 'ğŸ‡ªğŸ‡¸', points: 0 },
            { name: 'FRANCE', code: 'FR', flag: 'ğŸ‡«ğŸ‡·', points: 0 },
            { name: 'DENMARK', code: 'DK', flag: 'ğŸ‡©ğŸ‡°', points: 0 },
            { name: 'ISRAEL', code: 'IL', flag: 'ğŸ‡®ğŸ‡±', points: 0 },
            { name: 'ICELAND', code: 'IS', flag: 'ğŸ‡®ğŸ‡¸', points: 0 },
            { name: 'NETHERLANDS', code: 'NL', flag: 'ğŸ‡³ğŸ‡±', points: 0 },
            { name: 'SERBIA', code: 'RS', flag: 'ğŸ‡·ğŸ‡¸', points: 0 },
            { name: 'SAN MARINO', code: 'SM', flag: 'ğŸ‡¸ğŸ‡²', points: 0 },
            { name: 'AUSTRIA', code: 'AT', flag: 'ğŸ‡¦ğŸ‡¹', points: 0 },
            { name: 'CYPRUS', code: 'CY', flag: 'ğŸ‡¨ğŸ‡¾', points: 0 },
            { name: 'ARMENIA', code: 'AM', flag: 'ğŸ‡¦ğŸ‡²', points: 0 },
            { name: 'FINLAND', code: 'FI', flag: 'ğŸ‡«ğŸ‡®', points: 0 },
          ]);

          const [votingCountry, setVotingCountry] = useState('');
          const [votes, setVotes] = useState({});
          const [televotes, setTelevotes] = useState({});
          const [isAnimating, setIsAnimating] = useState(false);
          const [currentVote, setCurrentVote] = useState(null);
          const [animationQueue, setAnimationQueue] = useState([]);
          const [votedCountries, setVotedCountries] = useState([]);
          const [votingPhase, setVotingPhase] = useState('jury'); // 'jury' or 'televote'
          const [showSaveMenu, setShowSaveMenu] = useState(false);

          // Load saved data on mount
          useEffect(() => {
            const savedData = localStorage.getItem('eurovisionData');
            if (savedData) {
              try {
                const data = JSON.parse(savedData);
                if (data.countries) setCountries(data.countries);
                if (data.votedCountries) setVotedCountries(data.votedCountries);
                if (data.votingPhase) setVotingPhase(data.votingPhase);
                if (data.televotes) setTelevotes(data.televotes);
              } catch (e) {
                console.error('Error loading saved data:', e);
              }
            }
          }, []);

          // Auto-save whenever important data changes
          useEffect(() => {
            const dataToSave = {
              countries,
              votedCountries,
              votingPhase,
              televotes
            };
            localStorage.setItem('eurovisionData', JSON.stringify(dataToSave));
          }, [countries, votedCountries, votingPhase, televotes]);

          const pointValues = [1, 2, 3, 4, 5, 6, 7, 8, 10, 12];

          const sortedCountries = [...countries].sort((a, b) => {
            if (b.points !== a.points) return b.points - a.points;
            return a.name.localeCompare(b.name);
          });

          const handleVoteInput = (country, points) => {
            setVotes(prev => ({
              ...prev,
              [country]: points
            }));
          };

          const handleTelevoteInput = (country, points) => {
            setTelevotes(prev => ({
              ...prev,
              [country]: points
            }));
          };

          const generateRandomVotes = () => {
            if (votingPhase === 'jury') {
              // Get all point values that need to be assigned
              const availablePoints = [1, 2, 3, 4, 5, 6, 7, 8, 10, 12];
              
              // Shuffle the countries array
              const shuffledCountries = [...countries].sort(() => Math.random() - 0.5);
              
              // Take first 10 countries and assign jury points
              const newVotes = {};
              shuffledCountries.slice(0, 10).forEach((country, index) => {
                newVotes[country.name] = availablePoints[index];
              });
              
              setVotes(newVotes);
            }
          };

          const resetAll = () => {
            if (confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××¤×¡ ××ª ×›×œ ×”×”×¦×‘×¢×•×ª?')) {
              setCountries(countries.map(c => ({ ...c, points: 0 })));
              setVotedCountries([]);
              setVotes({});
              setTelevotes({});
              setVotingCountry('');
              setVotingPhase('jury');
              localStorage.removeItem('eurovisionData');
            }
          };

          const exportData = () => {
            const dataToExport = {
              countries,
              votedCountries,
              votingPhase,
              televotes,
              exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(dataToExport, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `eurovision-votes-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
          };

          const importData = (event) => {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = (e) => {
              try {
                const data = JSON.parse(e.target.result);
                if (data.countries) setCountries(data.countries);
                
                // Handle votedCountries
                let votedList = data.votedCountries || [];
                
                // If votedCountries is empty but we have jury points, calculate based on data
                if (votedList.length === 0 && data.votingPhase === 'jury' && data.countries) {
                  // Check if there are any jury points assigned
                  const hasJuryPoints = data.countries.some(c => c.points > 0);
                  if (hasJuryPoints) {
                    // Assume all 26 countries have voted if we're importing jury results
                    votedList = Array(26).fill().map((_, i) => `COUNTRY_${i + 1}`);
                  }
                }
                
                setVotedCountries(votedList);
                
                // Set phase and check if should switch to televote
                if (data.votingPhase) {
                  setVotingPhase(data.votingPhase);
                  
                  // If jury phase and all 26 have voted, switch to televote
                  if (data.votingPhase === 'jury' && votedList.length >= 26) {
                    setTimeout(() => {
                      alert('ğŸ‰ ×›×œ ×”××“×™× ×•×ª ×”×¦×‘×™×¢×•! ×¢×•×‘×¨ ×œ×”×¦×‘×¢×ª ×”×§×”×œ!');
                      setVotingPhase('televote');
                    }, 500);
                  }
                }
                
                if (data.televotes) setTelevotes(data.televotes);
                alert('âœ… ×”× ×ª×•× ×™× × ×˜×¢× ×• ×‘×”×¦×œ×—×”!');
              } catch (error) {
                alert('âŒ ×©×’×™××” ×‘×§×¨×™××ª ×”×§×•×‘×¥');
                console.error(error);
              }
            };
            reader.readAsText(file);
          };

          const viewSavedData = () => {
            const savedData = localStorage.getItem('eurovisionData');
            if (savedData) {
              console.log('=== × ×ª×•× ×™× ×©××•×¨×™× ×‘-LocalStorage ===');
              console.log(JSON.parse(savedData));
              alert('ğŸ“Š ×”× ×ª×•× ×™× ×”×•×“×¤×¡×• ×œ×§×•× ×¡×•×œ! (×œ×—×¥ F12 ×œ×¤×ª×™×—×ª ×”×§×•× ×¡×•×œ)');
            } else {
              alert('âŒ ××™×Ÿ × ×ª×•× ×™× ×©××•×¨×™×');
            }
          };

          const saveToSlot = (slotNumber) => {
            const dataToSave = {
              countries,
              votedCountries,
              votingPhase,
              televotes,
              saveDate: new Date().toISOString()
            };
            localStorage.setItem(`eurovisionSlot${slotNumber}`, JSON.stringify(dataToSave));
            alert(`âœ… × ×©××¨ ×‘×—×¨×™×¥ ${slotNumber}!`);
          };

          const loadFromSlot = (slotNumber) => {
            const savedData = localStorage.getItem(`eurovisionSlot${slotNumber}`);
            if (!savedData) {
              alert(`âŒ ××™×Ÿ ×©××™×¨×” ×‘×—×¨×™×¥ ${slotNumber}`);
              return;
            }
            
            try {
              const data = JSON.parse(savedData);
              if (data.countries) setCountries(data.countries);
              if (data.votedCountries) setVotedCountries(data.votedCountries);
              if (data.votingPhase) setVotingPhase(data.votingPhase);
              if (data.televotes) setTelevotes(data.televotes);
              const saveDate = data.saveDate ? new Date(data.saveDate).toLocaleString('he-IL') : '×œ× ×™×“×•×¢';
              alert(`âœ… × ×˜×¢×Ÿ ××—×¨×™×¥ ${slotNumber}!\n×ª××¨×™×š ×©××™×¨×”: ${saveDate}`);
            } catch (error) {
              alert('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”× ×ª×•× ×™×');
              console.error(error);
            }
          };

          const getSaveSlotInfo = (slotNumber) => {
            const savedData = localStorage.getItem(`eurovisionSlot${slotNumber}`);
            if (!savedData) return null;
            try {
              const data = JSON.parse(savedData);
              return {
                date: data.saveDate ? new Date(data.saveDate).toLocaleString('he-IL') : '×œ× ×™×“×•×¢',
                phase: data.votingPhase === 'jury' ? '×”×¦×‘×¢×ª ×©×•×¤×˜×™×' : '×”×¦×‘×¢×ª ×§×”×œ',
                votedCount: data.votedCountries?.length || 0
              };
            } catch {
              return null;
            }
          };

          const submitVotes = () => {
            if (!votingCountry) {
              alert('×× × ×‘×—×¨ ××“×™× ×” ××¦×‘×™×¢×”');
              return;
            }

            if (votingPhase === 'jury') {
              // Jury voting phase - simple point assignment
              const voteEntries = Object.entries(votes)
                .filter(([_, points]) => points > 0)
                .sort((a, b) => a[1] - b[1]);

              if (voteEntries.length === 0) {
                alert('×× × ×”×–×Ÿ ×œ×¤×—×•×ª ×”×¦×‘×¢×” ××—×ª');
                return;
              }

              setAnimationQueue(voteEntries);
              setIsAnimating(true);
            }
          };

          useEffect(() => {
            if (animationQueue.length > 0 && !currentVote) {
              const [nextCountry, nextPoints] = animationQueue[0];
              setCurrentVote({ country: nextCountry, points: nextPoints });
              
              setTimeout(() => {
                setCountries(prev => 
                  prev.map(c => 
                    c.name === nextCountry 
                      ? { ...c, points: c.points + nextPoints }
                      : c
                  )
                );

                setTimeout(() => {
                  setCurrentVote(null);
                  setAnimationQueue(prev => prev.slice(1));
                  
                  if (animationQueue.length === 1) {
                    setIsAnimating(false);
                    setVotes({});
                    if (votingCountry && votingPhase === 'jury') {
                      const newVotedCountries = [...votedCountries, votingCountry.toUpperCase()];
                      setVotedCountries(newVotedCountries);
                      
                      // Check if all 26 countries have voted - switch to televote phase
                      if (newVotedCountries.length === 26) {
                        setTimeout(() => {
                          alert('ğŸ‰ ×›×œ ×”××“×™× ×•×ª ×”×¦×‘×™×¢×•! ×¢×›×©×™×• ××ª×—×™×œ×” ×”×¦×‘×¢×ª ×”×§×”×œ!');
                          setVotingPhase('televote');
                          setVotedCountries([]);
                        }, 1000);
                      }
                    }
                    setVotingCountry('');
                  }
                }, 1500);
              }, 500);
            }
          }, [animationQueue, currentVote]);

          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-pink-900 p-8 text-white font-sans">
              <div className="max-w-7xl mx-auto">
                <div className="flex items-center justify-between mb-8">
                  <div className="flex-1 flex gap-2">
                    <button
                      onClick={exportData}
                      className="bg-blue-500/80 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-all hover:scale-105 flex items-center gap-2"
                      title="×™×™×¦× × ×ª×•× ×™× ×œ×§×•×‘×¥ JSON"
                    >
                      ğŸ’¾ ×™×™×¦×•×
                    </button>
                    <label className="bg-green-500/80 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition-all hover:scale-105 flex items-center gap-2 cursor-pointer">
                      ğŸ“¥ ×™×™×‘×•×
                      <input
                        type="file"
                        accept=".json"
                        onChange={importData}
                        className="hidden"
                      />
                    </label>
                    <button
                      onClick={viewSavedData}
                      className="bg-purple-500/80 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-all hover:scale-105 flex items-center gap-2"
                      title="×”×¦×’ × ×ª×•× ×™× ×‘×§×•× ×¡×•×œ"
                    >
                      ğŸ‘ï¸ ×”×¦×’
                    </button>
                  </div>
                  <h1 className="text-5xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-pink-400">
                    Eurovision 2020 Voting Simulator
                  </h1>
                  <div className="flex-1 flex justify-end">
                    <button
                      onClick={resetAll}
                      className="bg-red-500/80 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-all hover:scale-105 flex items-center gap-2"
                    >
                      ğŸ”„ ××™×¤×•×¡
                    </button>
                  </div>
                </div>

                {/* Scoreboard */}
                <div className="grid grid-cols-2 gap-4 mb-8">
                  {/* Left Column */}
                  <div className="space-y-2">
                    {sortedCountries.slice(0, Math.ceil(sortedCountries.length / 2)).map((country, idx) => (
                      <div
                        key={country.name}
                        className={`flex items-center justify-between bg-white/10 backdrop-blur-sm rounded-full px-6 py-3 transition-all duration-500 ${
                          currentVote?.country === country.name ? 'ring-4 ring-yellow-400 scale-105' : ''
                        } ${votedCountries.includes(country.name) ? 'bg-green-500/20 border-2 border-green-400' : ''}`}
                      >
                        <div className="flex items-center gap-3 flex-1">
                          <span className="text-2xl font-bold text-white/60 w-8">{idx + 1}</span>
                          <img 
                            src={`https://flagcdn.com/w80/${country.code.toLowerCase()}.png`}
                            alt={country.name}
                            className="w-12 h-9 object-cover rounded shadow-lg"
                            onError={(e) => {
                              e.target.style.display = 'none';
                              e.target.nextSibling.style.display = 'inline';
                            }}
                          />
                          <span className="text-lg font-black text-white bg-white/20 px-3 py-1 rounded hidden">{country.code}</span>
                          <span className="font-semibold text-lg flex items-center gap-2">
                            {country.name}
                            {votedCountries.includes(country.name) && (
                              <span className="text-green-400 text-xl">âœ“</span>
                            )}
                          </span>
                        </div>
                        <span className={`text-3xl font-bold ${
                          currentVote?.country === country.name ? 'text-yellow-400 animate-pulse' : 'text-white'
                        }`}>
                          {Number.isInteger(country.points) ? country.points : country.points.toFixed(1)}
                        </span>
                      </div>
                    ))}
                  </div>

                  {/* Right Column */}
                  <div className="space-y-2">
                    {sortedCountries.slice(Math.ceil(sortedCountries.length / 2)).map((country, idx) => (
                      <div
                        key={country.name}
                        className={`flex items-center justify-between bg-white/10 backdrop-blur-sm rounded-full px-6 py-3 transition-all duration-500 ${
                          currentVote?.country === country.name ? 'ring-4 ring-yellow-400 scale-105' : ''
                        } ${votedCountries.includes(country.name) ? 'bg-green-500/20 border-2 border-green-400' : ''}`}
                      >
                        <div className="flex items-center gap-3 flex-1">
                          <span className="text-2xl font-bold text-white/60 w-8">
                            {Math.ceil(sortedCountries.length / 2) + idx + 1}
                          </span>
                          <img 
                            src={`https://flagcdn.com/w80/${country.code.toLowerCase()}.png`}
                            alt={country.name}
                            className="w-12 h-9 object-cover rounded shadow-lg"
                            onError={(e) => {
                              e.target.style.display = 'none';
                              e.target.nextSibling.style.display = 'inline';
                            }}
                          />
                          <span className="text-lg font-black text-white bg-white/20 px-3 py-1 rounded hidden">{country.code}</span>
                          <span className="font-semibold text-lg flex items-center gap-2">
                            {country.name}
                            {votedCountries.includes(country.name) && (
                              <span className="text-green-400 text-xl">âœ“</span>
                            )}
                          </span>
                        </div>
                        <span className={`text-3xl font-bold ${
                          currentVote?.country === country.name ? 'text-yellow-400 animate-pulse' : 'text-white'
                        }`}>
                          {Number.isInteger(country.points) ? country.points : country.points.toFixed(1)}
                        </span>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Current Vote Display */}
                {currentVote && (
                  <div className="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-yellow-400 to-pink-500 rounded-3xl px-16 py-12 shadow-2xl z-50 animate-pulse">
                    <div className="text-center">
                      <img 
                        src={`https://flagcdn.com/w320/${countries.find(c => c.name === currentVote.country)?.code.toLowerCase()}.png`}
                        alt={currentVote.country}
                        className="w-40 h-28 object-cover rounded-xl shadow-2xl mx-auto mb-4 border-4 border-white/50"
                        onError={(e) => {
                          e.target.style.display = 'none';
                          e.target.nextSibling.style.display = 'block';
                        }}
                      />
                      <div className="text-6xl font-black text-white bg-white/20 px-8 py-4 rounded-xl inline-block mb-4 hidden">
                        {countries.find(c => c.name === currentVote.country)?.code}
                      </div>
                      <div className="text-4xl font-bold mb-2">{currentVote.country}</div>
                      <div className="text-7xl font-black text-white">
                        +{Number.isInteger(currentVote.points) ? currentVote.points : currentVote.points.toFixed(1)}
                      </div>
                    </div>
                  </div>
                )}

                {/* Voting Panel */}
                {!isAnimating && (
                  <div className="bg-white/5 backdrop-blur-md rounded-3xl p-8 border border-white/20">
                    {votingPhase === 'jury' ? (
                      <>
                        <h2 className="text-3xl font-bold mb-6 text-center">
                          ğŸ¤ ×”×¦×‘×¢×ª ×©×•×¤×˜×™× ({votedCountries.length}/26)
                        </h2>
                        
                        <div className="mb-6">
                          <label className="block text-xl mb-3 font-semibold">
                            ××“×™× ×” ××¦×‘×™×¢×”:
                          </label>
                          <input
                            type="text"
                            value={votingCountry}
                            onChange={(e) => setVotingCountry(e.target.value)}
                            placeholder="×œ×“×•×’××”: CYPRUS"
                            className="w-full px-6 py-4 rounded-2xl bg-white/10 border-2 border-white/30 text-white text-xl placeholder-white/50 focus:outline-none focus:border-yellow-400 transition-all"
                            disabled={isAnimating}
                          />
                          <button
                            onClick={generateRandomVotes}
                            disabled={isAnimating}
                            className="mt-3 w-full bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white font-bold py-3 px-6 rounded-xl text-lg hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center justify-center gap-2"
                          >
                            ğŸ² ×‘×—×™×¨×” ×¨× ×“×•××œ×™×ª
                          </button>
                        </div>

                        <div className="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6">
                          {countries.map(country => (
                            <div key={country.name} className="space-y-2">
                              <label className="block text-sm font-semibold flex items-center gap-2">
                                <img 
                                  src={`https://flagcdn.com/w40/${country.code.toLowerCase()}.png`}
                                  alt={country.name}
                                  className="w-10 h-7 object-cover rounded shadow"
                                  onError={(e) => {
                                    e.target.style.display = 'none';
                                    e.target.nextSibling.style.display = 'inline';
                                  }}
                                />
                                <span className="text-sm font-black text-white bg-white/20 px-2 py-1 rounded hidden">{country.code}</span>
                                <span className="text-xs">{country.name}</span>
                              </label>
                              <select
                                value={votes[country.name] || 0}
                                onChange={(e) => handleVoteInput(country.name, Number(e.target.value))}
                                className="w-full px-3 py-2 rounded-xl bg-white/10 border-2 border-white/30 text-white focus:outline-none focus:border-yellow-400 transition-all text-sm"
                                disabled={isAnimating}
                              >
                                <option value={0}>0</option>
                                {pointValues.map(val => (
                                  <option key={val} value={val}>{val}</option>
                                ))}
                              </select>
                            </div>
                          ))}
                        </div>

                        <button
                          onClick={submitVotes}
                          disabled={isAnimating}
                          className="w-full bg-gradient-to-r from-yellow-400 to-pink-500 text-white font-bold py-5 px-8 rounded-2xl text-2xl hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed shadow-2xl"
                        >
                          {isAnimating ? 'â³ ××¦×™×’ ×”×¦×‘×¢×•×ª...' : 'ğŸ‰ ×”×¦×’ ×”×¦×‘×¢×•×ª ×©×•×¤×˜×™×!'}
                        </button>
                      </>
                    ) : (
                      <>
                        <h2 className="text-3xl font-bold mb-6 text-center">
                          ğŸ“º ×”×¦×‘×¢×ª ×§×”×œ
                        </h2>
                        
                        <div className="mb-6 text-center text-white/80">
                          <p className="text-lg">×”×–×Ÿ ××ª ××¡×¤×¨ ×”×§×•×œ×•×ª ×©×›×œ ××“×™× ×” ×§×™×‘×œ×” ××”×§×”×œ</p>
                          <p className="text-sm mt-2">(×”××¢×¨×›×ª ×ª××™×¨ ××ª 10 ×”××“×™× ×•×ª ×¢× ×”×›×™ ×”×¨×‘×” ×§×•×œ×•×ª ×œ× ×§×•×“×•×ª ××™×¨×•×•×™×–×™×•×Ÿ)</p>
                        </div>

                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 max-h-96 overflow-y-auto">
                          {countries.map(country => (
                            <div key={country.name} className="space-y-2 bg-white/5 p-3 rounded-xl">
                              <label className="block text-sm font-semibold flex items-center gap-2">
                                <img 
                                  src={`https://flagcdn.com/w40/${country.code.toLowerCase()}.png`}
                                  alt={country.name}
                                  className="w-8 h-6 object-cover rounded shadow"
                                  onError={(e) => {
                                    e.target.style.display = 'none';
                                    e.target.nextSibling.style.display = 'inline';
                                  }}
                                />
                                <span className="text-xs font-black text-white bg-white/20 px-2 py-0.5 rounded hidden">{country.code}</span>
                                <span className="text-xs">{country.name}</span>
                              </label>
                              <input
                                type="number"
                                value={televotes[country.name] || ''}
                                onChange={(e) => handleTelevoteInput(country.name, Number(e.target.value) || 0)}
                                placeholder="0"
                                min="0"
                                className="w-full px-3 py-2 rounded-lg bg-white/10 border-2 border-white/30 text-white focus:outline-none focus:border-yellow-400 transition-all text-sm"
                              />
                            </div>
                          ))}
                        </div>

                        <button
                          onClick={() => {
                            // Process televotes and show results
                            const pointValues = [1, 2, 3, 4, 5, 6, 7, 8, 10, 12];
                            const sortedTelevotes = Object.entries(televotes)
                              .filter(([_, points]) => points > 0)
                              .sort((a, b) => b[1] - a[1])
                              .slice(0, 10);
                            
                            if (sortedTelevotes.length === 0) {
                              alert('×× × ×”×–×Ÿ ×œ×¤×—×•×ª ×”×¦×‘×¢×ª ×§×”×œ ××—×ª');
                              return;
                            }
                            
                            const televoteQueue = sortedTelevotes.map(([country, votes], index) => {
                              const points = pointValues[9 - index];
                              return [country, points];
                            }).sort((a, b) => a[1] - b[1]);
                            
                            setAnimationQueue(televoteQueue);
                            setIsAnimating(true);
                          }}
                          className="w-full bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold py-5 px-8 rounded-2xl text-2xl hover:scale-105 transition-transform shadow-2xl"
                        >
                          ğŸ‰ ×”×¦×’ ×ª×•×¦××•×ª ×”×§×”×œ!
                        </button>
                      </>
                    )}
                  </div>
                )}

                {/* Save/Load Slots Menu */}
                {!isAnimating && (
                  <div className="mt-8 bg-white/5 backdrop-blur-md rounded-3xl p-6 border border-white/20">
                    <div className="flex items-center justify-between mb-4">
                      <h3 className="text-2xl font-bold">ğŸ’¾ ×©××™×¨×” ×•×˜×¢×™× ×”</h3>
                      <button
                        onClick={() => setShowSaveMenu(!showSaveMenu)}
                        className="bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg transition-all"
                      >
                        {showSaveMenu ? 'â–¼ ×”×¡×ª×¨' : 'â–¶ ×”×¦×’'}
                      </button>
                    </div>
                    
                    {showSaveMenu && (
                      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        {[1, 2, 3].map(slot => {
                          const info = getSaveSlotInfo(slot);
                          return (
                            <div key={slot} className="bg-white/5 rounded-xl p-4 border border-white/10">
                              <div className="text-lg font-bold mb-2">×—×¨×™×¥ {slot}</div>
                              {info ? (
                                <div className="text-sm text-white/70 mb-3">
                                  <div>ğŸ“… {info.date}</div>
                                  <div>ğŸ“Š {info.phase}</div>
                                  <div>âœ… {info.votedCount} ××“×™× ×•×ª ×”×¦×‘×™×¢×•</div>
                                </div>
                              ) : (
                                <div className="text-sm text-white/50 mb-3 italic">×¨×™×§</div>
                              )}
                              <div className="flex gap-2">
                                <button
                                  onClick={() => saveToSlot(slot)}
                                  className="flex-1 bg-blue-500 hover:bg-blue-600 px-3 py-2 rounded-lg text-sm font-semibold transition-all"
                                >
                                  ğŸ’¾ ×©××•×¨
                                </button>
                                <button
                                  onClick={() => loadFromSlot(slot)}
                                  className="flex-1 bg-green-500 hover:bg-green-600 px-3 py-2 rounded-lg text-sm font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                                  disabled={!info}
                                >
                                  ğŸ“¥ ×˜×¢×Ÿ
                                </button>
                              </div>
                            </div>
                          );
                        })}
                      </div>
                    )}
                  </div>
                )}

                <div className="text-center mt-8 text-white/70">
                  <p className="text-lg">ğŸ’¡ ×‘×—×¨ ××“×™× ×” ××¦×‘×™×¢×”, ×”×–×Ÿ × ×§×•×“×•×ª ×œ×›×œ ××“×™× ×” (1-12), ×•×œ×—×¥ "×”×¦×’ ×”×¦×‘×¢×•×ª"</p>
                </div>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<EurovisionVoting />);
    </script>
</body>
</html>
